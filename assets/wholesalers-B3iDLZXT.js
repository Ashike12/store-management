import{j as s,M as U,B as N,T as f,a as o,u as F,f as R,g as k,h as B,i as T,r as m,C as W}from"./index-BH4uGada.js";import{B as y,C as _,D as O}from"./delete-confirmation.modal-DD-Zs4pu.js";function H({isOpen:n,handleCancel:c,formData:e,handleFormData:l,handleSubmit:g,isUpdate:d}){const i=F;return s.jsx(U,{open:n,onClose:()=>c(),children:s.jsxs(N,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:2},children:[s.jsx(f,{variant:"H5",content:d?"UPDATE_USER":"ADD_USER"}),s.jsxs(N,{display:"flex",flexDirection:"column",className:"gap-5 mt-4",children:[s.jsx(o,{className:"w-full",label:i({content:"FIRST_NAME"}),name:"FirstName",value:e==null?void 0:e.FirstName,onChange:l,fullWidth:!0}),s.jsx(o,{label:i({content:"LAST_NAME"}),name:"LastName",value:e==null?void 0:e.LastName,onChange:l,fullWidth:!0}),s.jsx(o,{label:i({content:"EMAIL"}),name:"Email",type:"string",value:e==null?void 0:e.Email,onChange:l,fullWidth:!0}),s.jsx(o,{label:i({content:"ADDRESS"}),name:"Address",type:"string",value:e==null?void 0:e.Address,onChange:l,fullWidth:!0}),s.jsx(o,{label:i({content:"PHONE_NUMBER"}),name:"Phone",type:"string",value:e==null?void 0:e.Phone,onChange:l,fullWidth:!0}),!d&&s.jsx(o,{label:i({content:"PASSWORD"}),name:"Password",type:"password",autoComplete:"new-password",autoFocus:!1,value:e==null?void 0:e.Password,onChange:l,fullWidth:!0})]}),s.jsxs(N,{display:"flex",justifyContent:"flex-end",className:"gap-4 mt-4",children:[s.jsx(y,{variant:"outlined",color:"secondary",onClick:()=>c(),children:"Cancel"}),s.jsx(y,{variant:"contained",color:"primary",onClick:()=>g(),children:d?"Update":"Save"})]})]})})}const z=[{key:"DisplayName",label:"NAME"},{key:"Email",label:"EMAIL"},{key:"Address",label:"ADDRESS"},{key:"Phone",label:"PHONE_NUMBER"}],x={ItemId:"",FirstName:"",LastName:"",Email:"",Address:"",Phone:"",Password:"",Active:!1};function J(){var j;const{data:n,isLoading:c,refetch:e}=R({pageNumber:1,pageSize:10,itemId:""}),[l,{isLoading:g}]=k(),[d,{isLoading:i}]=B(),[C,{isLoading:G}]=T(),[A,r]=m.useState(!1),[v,E]=m.useState(!1),[P,p]=m.useState(!1),[t,u]=m.useState(x),S=a=>{u(h=>({...h,[a.target.name]:a.target.value}))},b=async()=>{P?(await d({payload:{ItemId:t.ItemId,FirstName:t.FirstName,DisplayName:t.FirstName+" "+t.LastName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Active:t.Active}}).unwrap(),r(!1),p(!1),e()):(await l({payload:{FirstName:t.FirstName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Password:t.Password}}).unwrap(),r(!1),e())},I=async(a,h)=>{console.log("row",a),u({ItemId:a.ItemId,FirstName:a.FirstName,LastName:a.LastName,Email:a.Email,Address:a.Address,Phone:a.Phone,Password:a.Password??"",Active:a.Active}),h?E(!0):(p(!0),r(!0))},L=()=>{r(!1),p(!1),u(x)},w=async a=>{E(!1),a&&(await C({id:t.ItemId}).unwrap(),e())},M=()=>{u(x),r(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full",children:[s.jsx(W,{onClick:()=>M(),className:"fixed bottom-4 right-4 ml-4 my-3 cursor-pointer",text:"ADD_USER",variant:"primary"}),n&&n&&((j=n==null?void 0:n.Data)==null?void 0:j.length)>0&&s.jsx("div",{className:"p-10 w-full",children:s.jsx(_,{showActionButtons:!0,handleRowClick:I,columns:z,data:(n==null?void 0:n.Data)||[],rowsPerPage:10})}),c&&s.jsx("div",{className:"p-10 w-full",children:"Loading..."})]}),A&&s.jsx(H,{isUpdate:P,handleSubmit:b,formData:t,isOpen:A,handleFormData:S,handleCancel:L}),v&&s.jsx(O,{handleConfirm:w,isOpen:!0})]})}export{J as default};
