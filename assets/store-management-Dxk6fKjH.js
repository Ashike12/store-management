import{j as e,M as Q,B as m,T as U,a as r,u as w,b as L,c as A,d as R,e as _,r as g,C as E}from"./index-BH4uGada.js";import{B as h,C as B,D}from"./delete-confirmation.modal-DD-Zs4pu.js";function W({isOpen:s,handleCancel:u,formData:t,handleFormData:a,handleSubmit:N,isUpdate:o}){const l=w;return e.jsx(Q,{open:s,onClose:()=>u(),children:e.jsxs(m,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:2},children:[e.jsx(U,{variant:"H5",content:o?"UPDATE_PRODUCT":"ADD_PRODUCT"}),e.jsxs(m,{display:"flex",flexDirection:"column",className:"gap-5 mt-4",children:[e.jsx(r,{className:"w-full",label:l({content:"PRODUCT_NAME"}),name:"ProductName",value:t==null?void 0:t.ProductName,onChange:a,fullWidth:!0}),e.jsx(r,{label:l({content:"PRODUCT_DESCRIPTION"}),name:"Description",value:t==null?void 0:t.Description,onChange:a,fullWidth:!0}),e.jsx(r,{label:l({content:"MAKING_COST"}),name:"MakingPrice",type:"number",value:t==null?void 0:t.MakingPrice,onChange:a,fullWidth:!0}),e.jsx(r,{label:l({content:"SELLING_COST"}),name:"SellingPrice",type:"number",value:t==null?void 0:t.SellingPrice,onChange:a,fullWidth:!0}),e.jsx(r,{label:l({content:"QUANTITY"}),name:"Quantity",type:"number",value:t==null?void 0:t.Quantity,onChange:a,fullWidth:!0})]}),e.jsxs(m,{display:"flex",justifyContent:"flex-end",className:"gap-4 mt-4",children:[e.jsx(h,{variant:"outlined",color:"secondary",onClick:()=>u(),children:"Cancel"}),e.jsx(h,{variant:"contained",color:"primary",onClick:()=>N(),children:o?"Update":"Save"})]})]})})}const G=[{key:"ProductName",label:"Name"},{key:"MakingPrice",label:"MAKING_COST"},{key:"SellingPrice",label:"SELLING_COST"},{key:"Quantity",label:"QUANTITY"}],x={ItemId:"",ProductName:"",Description:"",MakingPrice:"",SellingPrice:"",Quantity:""};function Y(){var b;const{data:s,isLoading:u,refetch:t}=L({pageNumber:1,pageSize:10,itemId:""}),[a,{isLoading:N}]=A(),[o,{isLoading:l}]=R(),[I,{isLoading:z}]=_(),[y,c]=g.useState(!1),[j,C]=g.useState(!1),[S,p]=g.useState(!1),[n,d]=g.useState(x),M=i=>{d(P=>({...P,[i.target.name]:i.target.value}))},T=async()=>{S?(await o({payload:{ItemId:n.ItemId,ProductName:n.ProductName,Description:n.Description,MakingPrice:Number(n.MakingPrice),SellingPrice:Number(n.SellingPrice),Quantity:Number(n.Quantity)}}).unwrap(),c(!1),p(!1),t()):(await a({payload:{ProductName:n.ProductName,Description:n.Description,MakingPrice:Number(n.MakingPrice),SellingPrice:Number(n.SellingPrice),Quantity:Number(n.Quantity)}}).unwrap(),c(!1),t())},k=()=>{c(!1),p(!1),d(x)},v=async(i,P)=>{d({ItemId:i.ItemId,ProductName:i.ProductName,Description:i.Description,MakingPrice:i.MakingPrice.toString(),SellingPrice:i.SellingPrice.toString(),Quantity:i.Quantity.toString()}),P?C(!0):(p(!0),c(!0))},f=async i=>{C(!1),i&&(await I({id:n.ItemId}).unwrap(),t())},O=()=>{d(x),c(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(E,{onClick:()=>O(),className:"fixed bottom-4 right-4 ml-4 my-3 cursor-pointer",text:"ADD_PRODUCT",variant:"primary"}),s&&s&&((b=s==null?void 0:s.Data)==null?void 0:b.length)>0&&e.jsx("div",{className:"p-10 w-full",children:e.jsx(B,{showActionButtons:!0,handleRowClick:v,columns:G,data:(s==null?void 0:s.Data)||[],rowsPerPage:10})}),u&&e.jsx("div",{className:"p-10 w-full",children:"Loading..."})]}),y&&e.jsx(W,{isUpdate:S,handleSubmit:T,formData:n,isOpen:y,handleFormData:M,handleCancel:k}),j&&e.jsx(D,{handleConfirm:f,isOpen:!0})]})}export{Y as default};
