import{j as e,M as R,B as N,T as k,k as o,l as B,A as T,D as W,G as _,H as O,r as m,I as H,C as $}from"./index-DdhZj8dz.js";import{C as z}from"./CustomTable-c4eE7psD.js";import{D as G}from"./delete-confirmation.modal-C5cdIy8q.js";import{B as y}from"./Button-2qfgqLe5.js";function Q({isOpen:n,handleCancel:d,formData:s,handleFormData:l,handleSubmit:g,isUpdate:r}){const i=B;return e.jsx(R,{open:n,onClose:()=>d(),children:e.jsxs(N,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:2},children:[e.jsx(k,{variant:"H5",content:r?"UPDATE_USER":"ADD_USER"}),e.jsxs(N,{display:"flex",flexDirection:"column",className:"gap-5 mt-4",children:[e.jsx(o,{className:"w-full",label:i({content:"FIRST_NAME"}),name:"FirstName",value:s==null?void 0:s.FirstName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"LAST_NAME"}),name:"LastName",value:s==null?void 0:s.LastName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"EMAIL"}),name:"Email",type:"string",value:s==null?void 0:s.Email,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"ADDRESS"}),name:"Address",type:"string",value:s==null?void 0:s.Address,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"PHONE_NUMBER"}),name:"Phone",type:"string",value:s==null?void 0:s.Phone,onChange:l,fullWidth:!0}),!r&&e.jsx(o,{label:i({content:"PASSWORD"}),name:"Password",type:"password",autoComplete:"new-password",autoFocus:!1,value:s==null?void 0:s.Password,onChange:l,fullWidth:!0})]}),e.jsxs(N,{display:"flex",justifyContent:"flex-end",className:"gap-4 mt-4",children:[e.jsx(y,{variant:"outlined",color:"secondary",onClick:()=>d(),children:"Cancel"}),e.jsx(y,{variant:"contained",color:"primary",onClick:()=>g(),children:r?"Update":"Save"})]})]})})}const q=[{key:"DisplayName",label:"NAME"},{key:"Email",label:"EMAIL"},{key:"Address",label:"ADDRESS"},{key:"Phone",label:"PHONE_NUMBER"}],x={ItemId:"",FirstName:"",LastName:"",Email:"",Address:"",Phone:"",Password:"",Active:!1};function Z(){var j,v;const{data:n,isLoading:d,refetch:s}=T({pageNumber:1,pageSize:10,itemId:""}),[l,{isLoading:g}]=W(),[r,{isLoading:i}]=_(),[C,{isLoading:J}]=O(),[A,c]=m.useState(!1),[I,E]=m.useState(!1),[P,p]=m.useState(!1),[a,u]=m.useState(x),b=H(),S=t=>{u(h=>({...h,[t.target.name]:t.target.value}))},L=async()=>{P?(await r({payload:{ItemId:a.ItemId,FirstName:a.FirstName,DisplayName:a.FirstName+" "+a.LastName,LastName:a.LastName,Email:a.Email,Address:a.Address,Phone:a.Phone,Active:a.Active}}).unwrap(),c(!1),p(!1),s()):(await l({payload:{FirstName:a.FirstName,LastName:a.LastName,Email:a.Email,Address:a.Address,Phone:a.Phone,Password:a.Password}}).unwrap(),c(!1),s())},w=async(t,h,U)=>{console.log("row",t),u({ItemId:t.ItemId,FirstName:t.FirstName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Password:t.Password??"",Active:t.Active}),h?E(!0):U?b(`/wholesaler/invoice/${t.ItemId}?phoneNumber=${t.Phone}&wholesalerName=${t.FirstName+" "+t.LastName}`):(p(!0),c(!0))},f=()=>{c(!1),p(!1),u(x)},M=async t=>{E(!1),t&&(await C({id:a.ItemId}).unwrap(),s())},F=()=>{u(x),c(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx($,{onClick:()=>F(),className:"fixed bottom-4 right-4 ml-4 my-3 cursor-pointer",text:"ADD_USER",variant:"primary"}),n&&n&&((j=n==null?void 0:n.Data)==null?void 0:j.length)>0&&e.jsx("div",{className:"p-10 w-full",children:e.jsx(z,{showActionButtons:!0,isRowClickable:!0,handleRowClick:w,columns:q,data:(n==null?void 0:n.Data)||[],rowsPerPage:10})}),!d&&n&&n&&((v=n==null?void 0:n.Data)==null?void 0:v.length)==0&&e.jsx("div",{className:"p-10 w-full",children:"No data found"}),d&&e.jsx("div",{className:"p-10 w-full",children:"Loading..."})]}),A&&e.jsx(Q,{isUpdate:P,handleSubmit:L,formData:a,isOpen:A,handleFormData:S,handleCancel:f}),I&&e.jsx(G,{handleConfirm:M,isOpen:!0})]})}export{Z as default};
