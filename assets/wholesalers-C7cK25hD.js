import{j as e,M as B,B as x,T as W,k as o,l as _,A as O,D as H,G as $,H as z,r,I as G,C as Q}from"./index-Bilkcy3_.js";import{C as q}from"./CustomTable-PaS8ooqf.js";import{D as J}from"./delete-confirmation.modal-DPJdXp4F.js";import{B as C}from"./Button-CO-uh0HS.js";function K({isOpen:a,handleCancel:d,formData:s,handleFormData:l,handleSubmit:A,isUpdate:c}){const i=_;return e.jsx(B,{open:a,onClose:()=>d(),children:e.jsxs(x,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:2},children:[e.jsx(W,{variant:"H5",content:c?"UPDATE_USER":"ADD_USER"}),e.jsxs(x,{display:"flex",flexDirection:"column",className:"gap-5 mt-4",children:[e.jsx(o,{className:"w-full",label:i({content:"FIRST_NAME"}),name:"FirstName",value:s==null?void 0:s.FirstName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"LAST_NAME"}),name:"LastName",value:s==null?void 0:s.LastName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"EMAIL"}),name:"Email",type:"string",value:s==null?void 0:s.Email,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"ADDRESS"}),name:"Address",type:"string",value:s==null?void 0:s.Address,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"PHONE_NUMBER"}),name:"Phone",type:"string",value:s==null?void 0:s.Phone,onChange:l,fullWidth:!0}),!c&&e.jsx(o,{label:i({content:"PASSWORD"}),name:"Password",type:"password",autoComplete:"new-password",autoFocus:!1,value:s==null?void 0:s.Password,onChange:l,fullWidth:!0})]}),e.jsxs(x,{display:"flex",justifyContent:"flex-end",className:"gap-4 mt-4",children:[e.jsx(C,{variant:"outlined",color:"secondary",onClick:()=>d(),children:"Cancel"}),e.jsx(C,{variant:"contained",color:"primary",onClick:()=>A(),children:c?"Update":"Save"})]})]})})}const V=[{key:"DisplayName",label:"NAME"},{key:"Email",label:"EMAIL"},{key:"Address",label:"ADDRESS"},{key:"Phone",label:"PHONE_NUMBER"}],g={ItemId:"",FirstName:"",LastName:"",Email:"",Address:"",Phone:"",Password:"",Active:!1};function se(){var P,y;const{data:a,isLoading:d,refetch:s}=O({pageNumber:1,pageSize:10,itemId:""}),[l,{isLoading:A}]=H(),[c,{isLoading:i}]=$(),[S,{isLoading:X}]=z(),[v,u]=r.useState(!1),[b,j]=r.useState(!1),[E,h]=r.useState(!1),[N,f]=r.useState(""),[n,m]=r.useState(g),w=G(),I=t=>{m(p=>({...p,[t.target.name]:t.target.value}))},L=async()=>{E?(await c({payload:{ItemId:n.ItemId,FirstName:n.FirstName,DisplayName:n.FirstName+" "+n.LastName,LastName:n.LastName,Email:n.Email,Address:n.Address,Phone:n.Phone,Active:n.Active}}).unwrap(),u(!1),h(!1),s()):(await l({payload:{FirstName:n.FirstName,LastName:n.LastName,Email:n.Email,Address:n.Address,Phone:n.Phone,Password:n.Password}}).unwrap(),u(!1),s())},M=async(t,p,T)=>{console.log("row",t),m({ItemId:t.ItemId,FirstName:t.FirstName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Password:t.Password??"",Active:t.Active}),p?j(!0):T?w(`/wholesaler/invoice/${t.ItemId}?phoneNumber=${t.Phone}&wholesalerName=${t.FirstName+" "+t.LastName}`):(h(!0),u(!0))},F=()=>{u(!1),h(!1),m(g)},U=async t=>{j(!1),t&&(await S({id:n.ItemId}).unwrap(),s())},R=()=>{m(g),u(!0)},k=r.useMemo(()=>a!=null&&a.Data?a.Data.filter(t=>t.DisplayName.toLowerCase().includes(N.toLowerCase())):[],[a,N]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(Q,{onClick:()=>R(),className:"fixed bottom-4 right-4 ml-4 my-3 cursor-pointer",text:"ADD_USER",variant:"primary"}),a&&a&&((P=a==null?void 0:a.Data)==null?void 0:P.length)>0&&e.jsxs("div",{className:"p-10 w-full",children:[e.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name",className:"border p-2 rounded w-full sm:w-1/2",value:N,onChange:t=>f(t.target.value)})}),e.jsx(q,{showActionButtons:!0,isRowClickable:!0,handleRowClick:M,columns:V,data:k,rowsPerPage:10})]}),!d&&a&&a&&((y=a==null?void 0:a.Data)==null?void 0:y.length)==0&&e.jsx("div",{className:"p-10 w-full",children:"No data found"}),d&&e.jsx("div",{className:"p-10 w-full",children:"Loading..."})]}),v&&e.jsx(K,{isUpdate:E,handleSubmit:L,formData:n,isOpen:v,handleFormData:I,handleCancel:F}),b&&e.jsx(J,{handleConfirm:U,isOpen:!0})]})}export{se as default};
