import{j as e,M as U,B as N,T as F,a as o,u as R,f as k,g as B,h as T,i as W,r as m,C as _}from"./index-CAbPuwH0.js";import{C as O}from"./CustomTable-Bkpg96V7.js";import{B as v,D as H}from"./delete-confirmation.modal-BFdD7jZO.js";function z({isOpen:a,handleCancel:d,formData:s,handleFormData:l,handleSubmit:g,isUpdate:r}){const i=R;return e.jsx(U,{open:a,onClose:()=>d(),children:e.jsxs(N,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:5,borderRadius:2},children:[e.jsx(F,{variant:"H5",content:r?"UPDATE_USER":"ADD_USER"}),e.jsxs(N,{display:"flex",flexDirection:"column",className:"gap-5 mt-4",children:[e.jsx(o,{className:"w-full",label:i({content:"FIRST_NAME"}),name:"FirstName",value:s==null?void 0:s.FirstName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"LAST_NAME"}),name:"LastName",value:s==null?void 0:s.LastName,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"EMAIL"}),name:"Email",type:"string",value:s==null?void 0:s.Email,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"ADDRESS"}),name:"Address",type:"string",value:s==null?void 0:s.Address,onChange:l,fullWidth:!0}),e.jsx(o,{label:i({content:"PHONE_NUMBER"}),name:"Phone",type:"string",value:s==null?void 0:s.Phone,onChange:l,fullWidth:!0}),!r&&e.jsx(o,{label:i({content:"PASSWORD"}),name:"Password",type:"password",autoComplete:"new-password",autoFocus:!1,value:s==null?void 0:s.Password,onChange:l,fullWidth:!0})]}),e.jsxs(N,{display:"flex",justifyContent:"flex-end",className:"gap-4 mt-4",children:[e.jsx(v,{variant:"outlined",color:"secondary",onClick:()=>d(),children:"Cancel"}),e.jsx(v,{variant:"contained",color:"primary",onClick:()=>g(),children:r?"Update":"Save"})]})]})})}const G=[{key:"DisplayName",label:"NAME"},{key:"Email",label:"EMAIL"},{key:"Address",label:"ADDRESS"},{key:"Phone",label:"PHONE_NUMBER"}],x={ItemId:"",FirstName:"",LastName:"",Email:"",Address:"",Phone:"",Password:"",Active:!1};function V(){var j,y;const{data:a,isLoading:d,refetch:s}=k({pageNumber:1,pageSize:10,itemId:""}),[l,{isLoading:g}]=B(),[r,{isLoading:i}]=T(),[C,{isLoading:Q}]=W(),[A,c]=m.useState(!1),[S,E]=m.useState(!1),[P,p]=m.useState(!1),[t,u]=m.useState(x),b=n=>{u(h=>({...h,[n.target.name]:n.target.value}))},w=async()=>{P?(await r({payload:{ItemId:t.ItemId,FirstName:t.FirstName,DisplayName:t.FirstName+" "+t.LastName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Active:t.Active}}).unwrap(),c(!1),p(!1),s()):(await l({payload:{FirstName:t.FirstName,LastName:t.LastName,Email:t.Email,Address:t.Address,Phone:t.Phone,Password:t.Password}}).unwrap(),c(!1),s())},I=async(n,h)=>{console.log("row",n),u({ItemId:n.ItemId,FirstName:n.FirstName,LastName:n.LastName,Email:n.Email,Address:n.Address,Phone:n.Phone,Password:n.Password??"",Active:n.Active}),h?E(!0):(p(!0),c(!0))},L=()=>{c(!1),p(!1),u(x)},f=async n=>{E(!1),n&&(await C({id:t.ItemId}).unwrap(),s())},M=()=>{u(x),c(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(_,{onClick:()=>M(),className:"fixed bottom-4 right-4 ml-4 my-3 cursor-pointer",text:"ADD_USER",variant:"primary"}),a&&a&&((j=a==null?void 0:a.Data)==null?void 0:j.length)>0&&e.jsx("div",{className:"p-10 w-full",children:e.jsx(O,{showActionButtons:!0,handleRowClick:I,columns:G,data:(a==null?void 0:a.Data)||[],rowsPerPage:10})}),!d&&a&&a&&((y=a==null?void 0:a.Data)==null?void 0:y.length)==0&&e.jsx("div",{className:"p-10 w-full",children:"No data found"}),d&&e.jsx("div",{className:"p-10 w-full",children:"Loading..."})]}),A&&e.jsx(z,{isUpdate:P,handleSubmit:w,formData:t,isOpen:A,handleFormData:b,handleCancel:L}),S&&e.jsx(H,{handleConfirm:f,isOpen:!0})]})}export{V as default};
